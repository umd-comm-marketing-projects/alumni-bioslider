/**
 *	   UM-Dearborn Alumni Bio Slider
 *  	Version: 1.3 
 *  	Author: Kyle Smith 
 */

(function(a){a.fn.bioslider=function(b){var c={tweenTime:200,scrollPixels:100,captionText:"Click Image to See More",randomOrder:false,compact:false};return this.each(function(){if(b){a.extend(c,b)}var i,o=a(this),m,g,l,j,h;var d=0;var e=0,f=0,k;var n={addThumbnail:function(s,p,r,q){g.append("<li><a rel='"+s+"' title='"+r+"' href='"+q+"'><img src='"+p+"'/></a></li>")},swapBio:function(p){o.find(".active").removeClass("active").fadeOut(c.tweenTime,function(){a(o.children("li")[p]).addClass("active").fadeIn(c.tweenTime)})},setCaption:function(p){l.html(p)},scrollRight:function(){k=this.getPosition()-c.scrollPixels;k=k<=(0-f)?(0-f):k;g.animate({left:k},c.tweenTime*1.5,n.checkBounds(k))},scrollLeft:function(){k=this.getPosition()+c.scrollPixels;k=k>=0?0:k;g.animate({left:k},c.tweenTime*1.5,n.checkBounds(k))},getPosition:function(){currentPos=g.css("left");currentPos=currentPos.split("px")[0];return parseInt(currentPos)},checkBounds:function(p){if(f<=0){j.hide();h.hide();return}if(p>=0){j.show();h.hide()}else{if(p<=(0-f)){h.show();j.hide()}else{h.show();j.show()}}},logPos:function(){},init:function(){var r=this;if(c.randomOrder){var p=o.children("li").remove();p.sort(function(){return(Math.round(Math.random())-0.5)});for(var q=0;q<p.length;q++){o.prepend(p[q])}}var p=o.children("li").each(function(s){a(this).hide().addClass("clickable");a(this).click(function(){window.location=a(this).children("a").attr("href")});r.addThumbnail(s,a(this).children(".spotlight-thumb-src").val(),a(this).children("h2").text(),a(this).children("a").attr("href"));d++});f=d*45;g.css("width",f+"px");f-=281;r.checkBounds(r.getPosition());if(!c.compact){p.first().show().addClass("active");g.find("a").click(function(s){s.preventDefault();r.swapBio(a(this).attr("rel"))})}g.find("a").hover(function(){r.setCaption(a(this).attr("title"))},function(){r.setCaption(c.captionText)});j.click(function(){r.scrollRight()});h.click(function(){r.scrollLeft()})}};m=a('<div class="spotlight-thumb-wrapper"></div>');g=a('<ul class="spotlight-thumb-container"></ul>').appendTo(m);j=a('<span class="spotlight-nav-right">Next</span>').appendTo(m);h=a('<span class="spotlight-nav-left">Previous</span>').appendTo(m);l=a('<span class="spotlight-thumb-caption">'+c.captionText+"</span>").appendTo(m);a('<div class="clear"></div>').appendTo(m);o.after(m);if(c.source){a.ajax({url:c.source,dataType:"json",complete:function(q,p){if(p!="success"){}},success:function(s){var p=s.bios.length,r;for(var q=0;q<p;q++){r=[];r.push('<li>\n\t<img src="',s.bios[q].imageFull,'" alt="',s.bios[q].name,'" />\n\t<h2>',s.bios[q].name," ",s.bios[q].year,"</h2>\n\t<h3>",s.bios[q].major,"</h3>\n\t<span>",s.bios[q].description,'</span>\n\t<a href="',s.bios[q].url,'">read more ></a>\n\t<input type="hidden" class="spotlight-thumb-src" value="',s.bios[q].imageThumb,'" />\n\t<div class="clear">\n\t</div>\n</li>');a(r.join("")).appendTo(o)}n.init()}})}else{n.init()}})}})(jQuery);
